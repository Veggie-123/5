# 智能车竞赛项目

## 1. 项目简介

本项目是一个为智能车竞赛设计的综合性项目，主要基于 C++ 语言，并运行在树莓派（Raspberry Pi）平台上。项目利用了 OpenCV 进行图像处理，实现了循线、避障、斑马线识别、停车等多种智能车功能。此外，项目还集成了 MNN 深度学习框架和 YOLOv5 模型，用于实现对赛道元素（如A/B车库、障碍物等）的实时目标检测。

代码库中包含了多个独立的子项目，分别用于功能测试和最终的竞赛程序。

## 2. 目录结构

本代码库包含以下几个主要的子项目目录：

-   `12.2/`: 这是一个完整的智能车竞赛项目。它会编译生成一个名为 `SmartCar` 的主程序，集成了循线、目标检测、避障和停车等所有功能。
-   `dev_ws/`: 这是一个开发和测试工作区。里面包含了许多针对特定功能（如电机测试、道路切换、循迹、避障等）的独立小程序，方便进行模块化开发和调试。
-   `guo_dev_ws/`: 这似乎是另一个版本的竞赛项目，同样会生成一个主程序 `SmartCar` 以及一些用于测试的独立模块。

每个项目目录都包含：
- `src/`: C++ 源代码。
- `include/`: C++ 头文件。
- `script/`: Python 脚本，可能用于辅助测试、标定或数据处理。
- `CMakeLists.txt`: 项目的编译配置文件。

## 3. 环境要求

为了成功编译和运行本项目，您需要以下软硬件环境：

### 硬件
- 树莓派（Raspberry Pi 3B+ 或更高版本）
- 树莓派摄像头模组
- 电机、舵机及相应的驱动板

### 软件
- **操作系统**: Raspberry Pi OS (原 Raspbian)
- **编译器**: `g++` (支持 C++11)
- **构建工具**: `CMake` (版本 >= 3.10)
- **核心库**:
    - **OpenCV**: 用于图像处理。
    - **pigpio**: 用于控制树莓派的 GPIO，驱动电机和舵机。
    - **MNN**: 一个高效的深度学习推理引擎，用于运行目标检测模型。

您需要确保这些库已经正确安装在您的树莓派上。

## 4. 编译与运行

### 编译步骤

每个子项目 (`12.2`, `dev_ws`, `guo_dev_ws`) 都可以独立编译。编译步骤如下：

1.  **进入项目目录**:
    ```bash
    # 以 12.2 目录为例
    cd 12.2
    ```

2.  **创建编译目录**:
    ```bash
    mkdir build
    cd build
    ```

3.  **运行 CMake 生成 Makefile**:
    ```bash
    cmake ..
    ```

4.  **执行编译**:
    ```bash
    make
    ```

编译成功后，可执行文件会生成在 `build` 目录下。

### 运行程序

-   **对于 `12.2` 和 `guo_dev_ws` 项目**:
    编译后会生成一个名为 `SmartCar` 的主程序。运行它即可启动智能车的完整功能。
    ```bash
    # 在 build 目录下执行
    ./SmartCar
    ```
    **注意**: `12.2/src/main.cpp` 中的代码指定了 YOLO 模型需要存放在 `/home/pi/model/` 目录下，请确保您已将模型文件（`.mnn` 文件）放置在正确的位置。

-   **对于 `dev_ws` 项目**:
    编译后会生成多个可执行文件，如 `motor_test`, `track_line`, `avoid` 等。您可以根据需要运行相应的程序来测试特定功能。
    ```bash
    # 在 build 目录下执行，例如运行电机测试程序
    ./motor_test
    ```

## 5. Python 脚本

每个项目下的 `script/` 目录中包含了一些 Python 脚本。这些脚本可能是用于：
- 摄像头标定 (`calibration.py`)
- 图像处理算法测试 (如 `sobel.py`, `yellow_hsv.py`)
- 特定功能模块的 Python 实现版本

您可以根据需要直接使用 `python` 命令运行这些脚本。
```bash
# 例如运行一个测试脚本
python script/sobel.py
```
